<div class="container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Registrar Nuevo Pago</mat-card-title>
    </mat-card-header>
    
    <mat-card-content>
      <form [formGroup]="pagoForm" (ngSubmit)="guardar()">
        
        <!-- Contrato -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Contrato</mat-label>
          <mat-select formControlName="contrato" required>
            <mat-option *ngFor="let contrato of contratos" [value]="contrato">
              Contrato #{{contrato.idContrato}} - {{contrato.descripcion}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="pagoForm.get('contrato')?.hasError('required')">
            El contrato es obligatorio
          </mat-error>
        </mat-form-field>

        <!-- Monto -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Monto</mat-label>
          <input matInput type="number" formControlName="monto" step="0.01" min="0">
          <span matPrefix>S/&nbsp;</span>
          <mat-error *ngIf="pagoForm.get('monto')?.hasError('required')">
            El monto es obligatorio
          </mat-error>
          <mat-error *ngIf="pagoForm.get('monto')?.hasError('min')">
            El monto debe ser mayor a 0
          </mat-error>
        </mat-form-field>

        <!-- Fecha -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Fecha de Pago</mat-label>
          <input matInput type="date" formControlName="fecha" required>
          <mat-error *ngIf="pagoForm.get('fecha')?.hasError('required')">
            La fecha es obligatoria
          </mat-error>
        </mat-form-field>

        <!-- Método de Pago -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Método de Pago</mat-label>
          <mat-select formControlName="metodo" required>
            <mat-option *ngFor="let metodo of metodosPago" [value]="metodo">
              {{metodo}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="pagoForm.get('metodo')?.hasError('required')">
            El método de pago es obligatorio
          </mat-error>
        </mat-form-field>

        <!-- Estado -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Estado</mat-label>
          <mat-select formControlName="estado" required>
            <mat-option *ngFor="let estado of estados" [value]="estado">
              {{estado}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="pagoForm.get('estado')?.hasError('required')">
            El estado es obligatorio
          </mat-error>
        </mat-form-field>

        <!-- Botones -->
        <div class="button-row">
          <button mat-raised-button color="primary" type="submit" [disabled]="pagoForm.invalid">
            <mat-icon>save</mat-icon>
            Guardar
          </button>
          <button mat-raised-button type="button" (click)="cancelar()">
            <mat-icon>cancel</mat-icon>
            Cancelar
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>